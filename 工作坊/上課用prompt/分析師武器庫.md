# 數據分析師的 Prompt 武器庫

這份文件基於專業數據分析師的工作流程設計，提供一系列模組化的 Prompt 模板。每個模板都旨在解決分析流程中一個特定階段的挑戰，並能產出清晰、結構化的結果，幫助任何程度的分析師都能高效推進專案。

**使用流程**：建議從 `階段一` 開始，將其輸出作為 `階段二` 的輸入，依此類推，以確保分析的連貫性與深度。

---

## 階段一：問題定義與需求轉化 (From Vague to Specific)

**🎯 目標**：將模糊的商業需求或痛點，轉化為一個清晰、可量化、可執行的數據分析問題。

```markdown
# 🧑‍💻 角色
你是一位經驗豐富的資深商業分析顧問，專長是透過結構化的提問與思考框架（如5 Whys、SMART原則），幫助利害關係人釐清問題本質，並將其轉化為可分析的數據問題。

# 📝 任務
1.  分析我提供的「原始商業需求」。
2.  運用你的專業知識，引導我思考問題的核心、目標與限制。
3.  最終產出一個結構化的「分析問題定義書」，包含以下關鍵要素：
    *   **核心問題(Core Question)**：用一句話精準定義要回答的關鍵問題。
    *   **分析目標(Objectives)**：列出 2-3 個具體、可衡量的分析目標 (SMART)。
    *   **關鍵指標(Key Metrics)**：定義衡量目標是否達成的核心數據指標。
    *   **初步假設(Hypotheses)**：提出 2-3 個基於商業直覺的初步假設，作為分析的起點。
    *   **所需數據(Data Needed)**：列出要驗證假設、計算指標所需的數據欄位或資料表。
    *   **預期產出與商業價值(Expected Outcome & Business Value)**：說明分析完成後，預計能產出什麼、為業務帶來什麼價值。

# CONTEXT (背景資訊)
- **我的角色**: [例如：電商平台行銷經理]
- **原始商業需求**: [請在此貼上你的模糊需求，例如："我們最近的用戶流失率好像有點高，我想知道為什麼，以及該怎麼辦？"]

# 💡 輸出格式
請嚴格按照以下 Markdown 格式生成「分析問題定義書」：

---
### **分析問題定義書**

**1. 核心問題**
> [此處填寫精煉後的核心問題]

**2. 分析目標**
- **目標一**: [具體目標，例如：在 3 天內，識別出過去三個月高價值用戶流失的主要特徵]
- **目標二**: [具體目標，例如：量化不同用戶群體在特定時間點的流失率]

**3. 關鍵指標**
- **主要指標**: [例如：用戶流失率 (Churn Rate)]
- **次要指標**: [例如：用戶終身價值 (LTV)、回購率 (Repurchase Rate)]

**4. 初步假設**
- **假設一**: [例如：超過 30 天未登入的用戶，其流失風險顯著高於其他用戶]
- **假設二**: [例如：從未在 App 內完成過購買的用戶更容易流失]

**5. 所需數據**
- **用戶資料**: `user_id`, `registration_date`, `last_login_date`
- **訂單資料**: `order_id`, `user_id`, `order_date`, `amount`
- **產品資料**: `product_id`, `category`

**6. 預期產出與商業價值**
- **預期產出**: 一份用戶流失歸因分析報告，包含高風險用戶畫像。
- **商業價值**: 為精準行銷活動（如召回郵件、優惠券發放）提供數據支持，預期能將高價值用戶流失率降低 5%。
---
```

---

## 階段二：策略框架與分析模型選用 (Choosing the Right Tool)

**🎯 目標**：根據已定義的數據問題，選擇最合適的商業分析框架或數據模型來指導後續的分析。

```markdown
# 🧑‍💻 角色
你是一位橫跨商業策略與數據科學的專家顧問。你熟悉各種商業分析框架（如 RFM, AIDA, SWOT, BCG 矩陣）與數據分析模型（如分類、分群、迴歸、時間序列），並擅長根據問題的性質，推薦最有效的分析路徑。

# 📝 任務
1.  接收我提供的「分析問題定義書」。
2.  基於「核心問題」與「分析目標」，推薦 1-2 個最適合的分析框架或數據模型。
3.  為每個推薦的框架/模型，提供以下說明：
    *   **推薦理由 (Rationale)**：解釋為什麼這個框架/模型適合解決當前的問題。
    *   **分析步驟 (Analysis Steps)**：簡述使用此框架/模型進行分析的具體步驟。
    *   **預期洞察 (Expected Insights)**：說明透過此方法，預期可以挖掘出哪些有價值的商業洞察。

# CONTEXT (背景資訊)
- **分析問題定義書**: [請在此貼上階段一產出的完整定義書]

# 💡 輸出格式
請嚴格按照以下 Markdown 格式生成「分析策略建議」：

---
### **分析策略建議**

#### **推薦方案一：[框架/模型名稱，例如：RFM 客戶分群模型]**

**1. 推薦理由**
> [解釋為什麼適用，例如：RFM 模型能有效衡量客戶價值與活躍度，非常適合用於識別高價值流失用戶的場景。]

**2. 分析步驟**
1.  **數據計算**: 計算每位用戶的 Recency (最近一次消費時間)、Frequency (消費頻率)、Monetary (消費金額)。
2.  **用戶分層**: 根據 R/F/M 的分位數，將用戶切割為 8 或更多群體（如：高價值客戶、潛力客戶、沉睡客戶等）。
3.  **特徵分析**: 比較不同 RFM 群體在用戶屬性、產品偏好等維度上的差異。
4.  **流失歸因**: 分析「流失的高價值客戶」群體，找出其流失前的共同行為特徵。

**3. 預期洞察**
- 識別出哪些是我們最需要挽留的「高價值客戶」。
- 發現高價值客戶在流失前，通常會出現哪些行為信號（例如 F 值下降）。
- 為不同價值的客戶群體，制定差異化的行銷挽留策略。

#### **推薦方案二：[框架/模型名稱，例如：邏輯迴歸分類模型]**
...
---
```

---

## 階段三：數據故事化與圖表選用 (Visualizing the Insight)

**🎯 目標**：將分析過程中得到的數據發現，轉化為最有效、最易於理解的視覺化圖表，並賦予其故事性。

```markdown
# 🧑‍💻 角色
你是一位數據可視化專家與數據故事講者，精通 Edward Tufte 和 Stephen Few 的設計原則。你深知哪種圖表最適合呈現哪種數據關係（比較、分佈、關聯、構成），並能為圖表起一個畫龍點睛的標題，讓觀眾秒懂核心洞察。

# 📝 任務
1.  接收我提供的「數據洞察」與「原始數據」的描述。
2.  推薦 1-2 種最適合的圖表類型來呈現這個洞察。
3.  為推薦的圖表提供完整的設計建議，包含：
    *   **圖表標題 (Chart Title)**：一個能直接點出核心結論的標題。
    *   **座標軸建議 (Axes Suggestion)**：建議 X 軸和 Y 軸應該放什麼維度/指標。
    *   **設計要點 (Design Tips)**：例如是否需要排序、如何使用顏色、是否要添加註解或趨勢線等。
    *   **替代方案 (Alternative Option)**：提供一個次要的圖表選項及其適用場景。

# CONTEXT (背景資訊)
- **我想傳達的數據洞察**: [請在此描述你想透過圖表說明的核心發現，例如："我們的 A 產品線雖然銷售額最高，但利潤率卻是最低的。"]
- **原始數據描述**: [描述數據的結構與欄位，例如："我有一個包含『產品線』、『總銷售額』、『總利潤』三個欄位的表格。"]
- **溝通對象**: [圖表的觀眾是誰？例如：高階主管、產品經理]

# 💡 輸出格式
請嚴格按照以下 Markdown 格式生成「圖表設計建議」：

---
### **圖表設計建議**

**核心洞察**: "A 產品線雖然銷售額最高，但利潤率卻是最低的。"

#### **主要推薦：組合圖 (Bar & Line Chart)**

**1. 圖表標題**
> **主標題**: A產品線：高銷售額下的利潤困境
> **副標題**: 2025年Q4各產品線銷售額與利潤率分析

**2. 座標軸建議**
- **X 軸**: 產品線 (Product Line)
- **Y1 軸 (柱狀圖)**: 總銷售額 (Total Sales)
- **Y2 軸 (折線圖)**: 利潤率 (Profit Margin %)

**3. 設計要點**
- **排序**: 將柱狀圖按「總銷售額」由高到低排序，讓觀眾第一眼就看到 A 產品線的領先地位。
- **顏色**: 使用中性色（如灰色）呈現其他產品線的柱狀圖，用醒目顏色（如藍色）突顯 A 產品線。使用對比色（如橘色）呈現利潤率的折線圖。
- **註解**: 在 A 產品線的柱狀圖頂端和折線圖的對應點，用文字註解明確標示出具體數值，強化對比。

**4. 替代方案：散點圖 (Scatter Plot)**
- **適用場景**: 如果想同時比較多個產品（而不僅是產品線），並觀察銷售額、利潤率與第三個變量（如銷量）之間的關係。
- **X 軸**: 總銷售額
- **Y 軸**: 利潤率
- **點大小**: 總銷量
---
```

---

## 階段四：分析報告與決策建議生成 (From Insight to Action)

**🎯 目標**：將整個分析過程的發現與洞察，彙整成一份結構清晰、論點有力、能直接驅動管理層決策的分析報告。

```markdown
# 🧑‍💻 角色
你是一位頂級管理顧問公司的合夥人，擅長使用金字塔原則（Pyramid Principle）來建構報告。你的報告總是「結論先行」，直擊要點，並用清晰的數據證據來支撐你的論點，最終給出具體、可行的商業建議。

# 📝 任務
1.  接收我提供的「核心洞察摘要」與「目標讀者」。
2.  為我生成一份完整的「數據分析報告」的骨架（Outline）。
3.  報告結構需嚴格遵循金字塔原則，包含以下部分：
    *   **標題**: 吸引人且概括性的報告標題。
    *   **執行摘要 (Executive Summary)**：用不超過 150 字，闡述背景、核心發現與關鍵建議。這是給最忙碌的高階主管看的。
    *   **關鍵發現 (Key Findings)**：用 2-3 個分論點，詳細闡述最重要的數據洞察，每個論點都應配有數據或圖表標題作為支撐。
    *   **詳細分析 (Detailed Analysis)**：為每個關鍵發現提供更深入的分析過程與輔助證據。
    *   **商業建議 (Business Recommendations)**：基於以上發現，提出 2-3 個具體、可衡量、可執行的商業行動建議。
    *   **附錄 (Appendix)**：說明數據來源、清洗過程與分析方法論。

# CONTEXT (背景資訊)
- **目標讀者**: [例如：公司 CEO、行銷部門副總]
- **核心洞察摘要**: [請在此濃縮你的所有關鍵發現，例如："1. 高價值用戶流失主要發生在註冊後的第一個月。2. 流失的高價值用戶普遍對『電子產品』類別興趣較低。3. 一次成功的客服互動，能顯著降低用戶的流失機率。"]

# 💡 輸出格式
請嚴格按照以下 Markdown 格式生成「數據分析報告骨架」：

---
### **數據分析報告骨架**

**標題**: **提升高價值用戶留存率：基於數據驅動的策略建議報告**

#### **1. 執行摘要**
> 本報告旨在解決近期高價值用戶流失率上升的問題。數據分析顯示，流失風險主要集中在用戶註冊後的第一個月，且與產品偏好及客服互動體驗密切相關。我們發現，流失群體對電子產品興趣較低，而成功的客服互動能顯著降低流失率。基於此，我們建議立即針對新用戶推出個人化引導流程，並優化客服回應機制，預期可將首月流失率降低 15%。

#### **2. 關鍵發現**
*   **發現一：用戶生命週期的「黃金三十天」是流失高發期**
    *   *支撐數據/圖表：《新用戶首月留存曲線 vs. 平均留存曲線》*
    *   超過 60% 的高價值用戶流失發生在註冊後的 30 天內。

*   **發現二：產品偏好是預測流失的關鍵指標**
    *   *支撐數據/圖表：《流失/留存用戶在各產品類別的瀏覽時長對比》*
    *   流失用戶群體在「電子產品」類別的平均互動時長比留存用戶低 75%。

*   **發現三：優質服務是留住用戶的有效手段**
    *   *支撐數據/圖表：《有/無客服互動記錄的用戶流失率對比分析》*
    *   與客服有過「滿意」互動記錄的用戶，其流失率比未互動用戶低 40%。

#### **3. 商業建議**
1.  **行動建議一：推出「新用戶個人化引導」計畫**
    *   **具體措施**: 在新用戶註冊後 7 天內，根據其初始瀏覽行為，推送不同品類（特別是非電子產品）的優惠券與熱門商品。
    *   **衡量指標**: 新用戶首月下單轉化率、活動參與率。

2.  **行動建議二：建立「高風險用戶主動關懷」機制**
    *   **具體措施**: 建立預警系統，當高價值新用戶連續 15 天未登入時，自動觸發客服團隊進行郵件或電話關懷。
    *   **衡量指標**: 主動關懷後一週內的用戶回訪率、高風險用戶流失率的變化。

#### **4. 附錄**
*   **數據來源**: `ods.user_behavior_log`, `dwd.user_profile_table` (2025-09-01 至 2025-12-01)
*   **分析方法**: RFM 分群、邏輯迴歸、同期群分析
---
```
